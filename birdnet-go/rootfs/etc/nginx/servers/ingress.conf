server {
    listen %%interface%%:%%port%% default_server;
    include /etc/nginx/includes/server_params.conf;
    include /etc/nginx/includes/proxy_params.conf;

    location / {
      proxy_pass http://localhost:8080/;
      rewrite ^%%ingress_entry%%/(.*)$ /$1 break;

      # Disable buffering (required for SSE)
      proxy_buffering off;
      proxy_request_buffering off;
      proxy_cache off;

      # Tell BirdNET-Go its proxy prefix so it can construct
      # correct URLs internally (no sub_filter rules needed)
      proxy_set_header X-Ingress-Path %%ingress_entry%%;
    }
}
